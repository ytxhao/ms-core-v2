# Copyright (c) 2016 The WebRTC project authors. All Rights Reserved.
#
# Use of this source code is governed by a BSD-style license
# that can be found in the LICENSE file in the root of the source
# tree. An additional intellectual property rights grant can be found
# in the file PATENTS.  All contributing project authors may
# be found in the AUTHORS file in the root of the source tree.
import("../ms-core.gni")
if (is_android) {
  import("//build/config/android/config.gni")
  import("//build/config/android/rules.gni")

  group("android") {
    if (is_android) {
      public_deps = [
        ":libms-core",
        # ":libms-framework",
      ]
    }
  }

  # dist_jar("libms-framework") {
  #   _target_dir_name = get_label_info(":$target_name", "dir")
  #   output = "${root_out_dir}/lib.java${_target_dir_name}/${target_name}.jar"
  #   print("=======dist_jar output:$output")
  #   print("=======dist_jar _target_dir_name:$_target_dir_name")
  #   direct_deps_only = true
  #   use_unprocessed_jars = true
  #   no_build_hooks = true
  #   deps = [
  #     ":ms_java"
  #   ]
  # }

  # java_library("ms_java") {
  #   sources = [
  #     "api/media/ushow/ms/Constants.java",
  #   ]
  # }
  #   shared_library("libms-core") {
  #   visibility = [ "*" ]
  #   sources = [ "src/test.cc" ]
  #   ldflags = [
  #     "-Wl,--build-id",
  #   ]
  #   deps = [
  #     ":libms-core_static",
  #   ]
  #   output_extension = "so"
  # }

  shared_library("libms-core") {
    visibility = [ "*" ]
    # sources = [ "src/test.cc" ]
    ldflags = [
      "-Wl,--build-id",
      "-static-libstdc++"
    ]
    deps = [
      "//third_party/spdlog:spdlog",
      "./src:libmsl_static"
    ]
    output_extension = "so"
  }
}

if (is_ios) {
  import("//build/config/ios/ios_sdk.gni")
  import("//build/config/ios/rules.gni")
}

# group("sdk") {
#   public_deps = []
#   if (is_ios) {
#     public_deps += [ ":framework_objc" ]

#     frameworks = [
#       "AVFoundation.framework",
#       "CoreMedia.framework",
#       "AudioToolbox.framework",
#     ]
#   }
# }