ninja_required_version = 1.7.2

rule gn
  command = ../../../buildtools/mac/gn --root=../../.. -q --regeneration gen .
  pool = console
  description = Regenerating ninja files

build build.ninja: gn
  generator = 1
  depfile = build.ninja.d

pool build_toolchain_action_pool
  depth = 16

pool build_toolchain_link_pool
  depth = 1

subninja toolchain.ninja

build default: phony obj/default.stamp
build android: phony obj/third_party/ms-core/sdk/android/android.stamp
build common_deps: phony obj/build/config/common_deps.stamp
build executable_deps: phony obj/build/config/executable_deps.stamp
build libms-core: phony ./libms-core.so.TOC
build loadable_module_deps: phony obj/build/config/loadable_module_deps.stamp
build poison_audio_codecs: phony obj/third_party/ms-core/poison_audio_codecs.stamp
build poison_default_task_queue: phony obj/third_party/ms-core/poison_default_task_queue.stamp
build poison_rtc_json: phony obj/third_party/ms-core/poison_rtc_json.stamp
build poison_software_video_codecs: phony obj/third_party/ms-core/poison_software_video_codecs.stamp
build shared_library_deps: phony obj/build/config/shared_library_deps.stamp
build $:default: phony obj/default.stamp
build build/config$:common_deps: phony obj/build/config/common_deps.stamp
build build/config$:executable_deps: phony obj/build/config/executable_deps.stamp
build build/config$:loadable_module_deps: phony obj/build/config/loadable_module_deps.stamp
build build/config$:shared_library_deps: phony obj/build/config/shared_library_deps.stamp
build third_party/ms-core$:poison_audio_codecs: phony obj/third_party/ms-core/poison_audio_codecs.stamp
build third_party/ms-core$:poison_default_task_queue: phony obj/third_party/ms-core/poison_default_task_queue.stamp
build third_party/ms-core$:poison_rtc_json: phony obj/third_party/ms-core/poison_rtc_json.stamp
build third_party/ms-core$:poison_software_video_codecs: phony obj/third_party/ms-core/poison_software_video_codecs.stamp
build third_party/ms-core/sdk/android$:android: phony obj/third_party/ms-core/sdk/android/android.stamp
build third_party/ms-core/sdk/android: phony obj/third_party/ms-core/sdk/android/android.stamp
build third_party/ms-core/sdk/android$:libms-core: phony ./libms-core.so.TOC

build all: phony $
    obj/default.stamp $
    obj/build/config/common_deps.stamp $
    obj/build/config/executable_deps.stamp $
    obj/build/config/loadable_module_deps.stamp $
    obj/build/config/shared_library_deps.stamp $
    obj/third_party/ms-core/poison_audio_codecs.stamp $
    obj/third_party/ms-core/poison_default_task_queue.stamp $
    obj/third_party/ms-core/poison_rtc_json.stamp $
    obj/third_party/ms-core/poison_software_video_codecs.stamp $
    obj/third_party/ms-core/sdk/android/android.stamp $
    ./libms-core.so.TOC

default default
